{"remainingRequest":"E:\\text\\vue基础\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js!E:\\text\\vue基础\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\text\\vue基础\\vue-admin-template-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\text\\vue基础\\vue-admin-template-master\\src\\views\\departments\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\text\\vue基础\\vue-admin-template-master\\src\\views\\departments\\index.vue","mtime":1661511190922},{"path":"E:\\text\\vue基础\\vue-admin-template-master\\babel.config.js","mtime":1661332991891},{"path":"E:\\text\\vue基础\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661324308788},{"path":"E:\\text\\vue基础\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1661324301563},{"path":"E:\\text\\vue基础\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661324308788},{"path":"E:\\text\\vue基础\\vue-admin-template-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1661324302450}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRTovdGV4dC92dWVcdTU3RkFcdTc4NDAvdnVlLWFkbWluLXRlbXBsYXRlLW1hc3Rlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkU6L3RleHQvdnVlXHU1N0ZBXHU3ODQwL3Z1ZS1hZG1pbi10ZW1wbGF0ZS1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgVHJlZVRvb2xzIGZyb20gJ0Avdmlld3MvZGVwYXJ0bWVudHMvY29tcG9uZW50cy90cmVlLXRvb2xzJzsKaW1wb3J0IHsgZ2V0RGVwYXJ0bWVudHMgYXMgX2dldERlcGFydG1lbnRzIH0gZnJvbSAnQC9hcGkvZGVwYXJ0bWVudHMnOwppbXBvcnQgYWRkRGVwdCBmcm9tICdAL3ZpZXdzL2RlcGFydG1lbnRzL2NvbXBvbmVudHMvYWRkLWRlcHQnOwppbXBvcnQgeyB0cmFuTGlzdFRyZWVEYXRhIH0gZnJvbSAnQC91dGlscyc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBUcmVlVG9vbHM6IFRyZWVUb29scywKICAgIGFkZERlcHQ6IGFkZERlcHQKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb21wYW55OiB7fSwKICAgICAgZGVwYXJ0czogW10sCiAgICAgIGRlZmF1bHRQcm9wczogewogICAgICAgIGxhYmVsOiAnbmFtZScgLy8g6KGo56S6IOS7jui/meS4quWxnuaAp+aYvuekuuWGheWuuQoKICAgICAgfSwKICAgICAgc2hvd0RpYWxvZzogZmFsc2UsCiAgICAgIG5vZGU6IHt9LAogICAgICBsb2FkaW5nOiBmYWxzZQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldERlcGFydG1lbnRzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXREZXBhcnRtZW50czogZnVuY3Rpb24gZ2V0RGVwYXJ0bWVudHMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX2dldERlcGFydG1lbnRzKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAgICAgICBfdGhpcy5jb21wYW55ID0gewogICAgICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEuY29tcGFueU5hbWUsCiAgICAgICAgICAgICAgICAgICAgbWFuYWdlcjogJ+i0n+i0o+S6uicsCiAgICAgICAgICAgICAgICAgICAgaWQ6ICcnCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIF90aGlzLmRlcGFydHMgPSBkYXRhLmRlcHRzOwogICAgICAgICAgICAgICAgICB0cmFuTGlzdFRyZWVEYXRhKGRhdGEuZGVwdHMsICcnKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBhZGREZXB0czogZnVuY3Rpb24gYWRkRGVwdHMobm9kZSkgewogICAgICB0aGlzLnNob3dEaWFsb2cgPSB0cnVlOwogICAgICB0aGlzLm5vZGUgPSBub2RlOwogICAgfSwKICAgIGVkaXREZXB0czogZnVuY3Rpb24gZWRpdERlcHRzKG5vZGUpIHsKICAgICAgdGhpcy5zaG93RGlhbG9nID0gdHJ1ZTsKICAgICAgdGhpcy5ub2RlID0gbm9kZTsKICAgICAgdGhpcy4kcmVmcy5hZGREZXB0LmdldERlcGFydERldGFpbChub2RlLmlkKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;EACAA;IAAAC;IAAAC;EAAA,CADA;EAEAC,IAFA,kBAEA;IACA;MACAC,WADA;MAEAC,WAFA;MAGAC;QACAC,aADA,CACA;;MADA,CAHA;MAMAC,iBANA;MAOAC,QAPA;MAQAC;IARA;EAUA,CAbA;EAcAC,OAdA,qBAcA;IACA;EACA,CAhBA;EAiBAC;IACAC,cADA,4BACA;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBADA;gBAAA,OAEAA;kBACA;oBAAAC;oBAAAC;oBAAAC;kBAAA;kBACA;kBACAC;gBACA,CAJA,CAFA;;cAAA;gBAOA;;cAPA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAQA,CATA;IAUAC,QAVA,oBAUAT,IAVA,EAUA;MACA;MACA;IACA,CAbA;IAcAU,SAdA,qBAcAV,IAdA,EAcA;MACA;MACA;MAEA;IACA;EAnBA;AAjBA","names":["components","TreeTools","addDept","data","company","departs","defaultProps","label","showDialog","node","loading","created","methods","getDepartments","name","manager","id","tranListTreeData","addDepts","editDepts"],"sourceRoot":"src/views/departments","sources":["index.vue"],"sourcesContent":["<template>\n  <div v-loading=\"loading\" class=\"dashboard-container\">\n    <div class=\"app-container\">\n      <el-card class=\"tree-card\">\n        <tree-tools :tree-node=\"company\" :is-root=\"true\"/>\n        <el-tree :data=\"departs\" :default-expand-all=\"true\" :props=\"defaultProps\">\n          <tree-tools slot-scope=\"{ data }\" :tree-node=\"data\" @delDepts=\"getDepartments\" @addDepts=\"addDepts\" @editDepts=\"editDepts\"/>\n        </el-tree>\n      </el-card>\n    </div>\n    <add-dept ref=\"addDept\" :show-dialog.sync=\"showDialog\" :tree-node=\"node\" @addDepts=\"getDepartments\"/>\n  </div>\n\n</template>\n\n<script>\nimport TreeTools from '@/views/departments/components/tree-tools'\nimport { getDepartments } from '@/api/departments'\nimport addDept from '@/views/departments/components/add-dept'\nimport { tranListTreeData } from '@/utils'\nexport default {\n  components: { TreeTools, addDept },\n  data () {\n    return {\n      company: {},\n      departs: [],\n      defaultProps: {\n        label: 'name' // 表示 从这个属性显示内容\n      },\n      showDialog: false,\n      node: {},\n      loading: false\n    }\n  },\n  created() {\n    this.getDepartments()\n  },\n  methods: {\n    async getDepartments () {\n      this.loading = true\n      await getDepartments().then(data => {\n        this.company = { name: data.companyName, manager: '负责人', id: '' }\n        this.departs = data.depts\n        tranListTreeData(data.depts, '')\n      })\n      this.loading = false\n    },\n    addDepts(node) {\n      this.showDialog = true\n      this.node = node\n    },\n    editDepts(node) {\n      this.showDialog = true\n      this.node = node\n\n      this.$refs.addDept.getDepartDetail(node.id)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.tree-card {\n  padding: 30px 140px;\n  font-size: 14px\n}\n</style>\n"]}]}